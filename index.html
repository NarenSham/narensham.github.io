<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naren Sham | Portfolio</title>
    <link href="styles/main.css" rel="stylesheet">
    <!-- Add Inter font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Add Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Add fflate for EXR support -->
    <script src="https://cdn.jsdelivr.net/npm/fflate@0.7.4/umd/index.min.js"></script>
    <!-- Add GLTFLoader for loading GLB files -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <!-- Add EXR loader -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/EXRLoader.js"></script>
    <!-- Add OrbitControls -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

</head>
<body>
    <!-- Add loading overlay -->
    <div id="loading-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255, 255, 255, 0.9); display: flex; align-items: center; justify-content: center; font-size: 2rem; z-index: 9999;">
        <span style="color: lightgrey; font-family: 'Arial Narrow', sans-serif; font-weight: normal; font-size: 2rem;">Loading...</span>
        <span id="countdown" style="color: lightgrey; font-family: 'Arial Narrow', sans-serif; font-weight: normal; font-size: 2rem;">5</span>
    </div>
    <nav>
        <div class="container">
            <div class="logo">
                <a href="/">NAREN</a>
            </div>
            <button class="hamburger" id="hamburger" aria-label="Menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul id="nav-links">
                <li><a href="#projects">Projects</a></li>
                <li><a href="#skills">Skills</a></li>
                <li><a href="#experience">Experience</a></li>
                <li><a href="#education">Education</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <main>
            <section class="hero">
                <div class="model-wrapper">
                    <div id="model-container"></div>
                </div>
                <div class="text-container">
                    <h2>Hello, I'm Naren.<br>I'm a <span class="dynamic-text"></span></h2>
                </div>
                <div class="social-links">
                    <a href="https://github.com/NarenSham" class="button">GitHub</a>
                    <a href="https://www.linkedin.com/in/narensham/" class="button">LinkedIn</a>
                </div>
            </section>

            <section id="projects">
                <h2>My projects</h2>
                <div class="projects-grid">
                    <div class="project-square">
                        <div class="project-inner">
                            <div class="project-front">
                                <img src="assets/fhir.png" alt="FHIR Query Translator Logo">
                            </div>
                            <div class="project-description">
                                <p>A tool for translating FHIR queries.</p>
                            </div>
                        </div>
                    </div>
                    <div class="project-square">
                        <div class="project-inner">
                            <div class="project-front">
                                <img src="assets/fc.png" alt="Fitness Class Logo">
                            </div>
                            <div class="project-description">
                                <p>AI platform for gym coaching</p>
                            </div>
                        </div>
                    </div>
                    <div class="project-square">
                        <div class="project-inner">
                            <div class="project-front">
                                <img src="assets/sales_analytics.png" alt="Sales Analytics Logo">
                            </div>
                            <div class="project-description">
                                <p>Analytics tool for sales data.</p>
                            </div>
                        </div>
                    </div>
                    <div class="project-square">
                        <div class="project-inner">
                            <div class="project-front">
                                <img src="assets/focalpoint.webp" alt="FocalPoint by Deloitte Ventures Logo">
                            </div>
                            <div class="project-description">
                                <p>Consulting Assessment Tool.</p>
                            </div>
                        </div>
                    </div>
                    <div class="project-square">
                        <div class="project-inner">
                            <div class="project-front">
                                <img src="assets/querent.png" alt="Querent by Practo Logo">
                            </div>
                            <div class="project-description">
                                <p>BI for care providers.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="skills">
                <h2>My Skills</h2>
                <div class="skills-grid">
                    <svg class="skills-connections"></svg>
                    <!-- Skills items will be added here -->
                </div>
            </section>

            <section id="experience">
                <h2>My Experience</h2>
                <div class="experience-grid">
                    <div class="experience-item">
                        <div class="experience-header">
                            <h3>Enablement Manager</h3>
                            <div class="company">Molson Coors</div>
                            <div class="duration">August 2023 - Present</div>
                        </div>
                        <p class="experience-description">
                            Enablement leader for CPG platforms. Transforming the way we build and enhance internal platforms to ensure we are able to deliver value to our customers.
                        </p>
                    </div>

                    <div class="experience-item">
                        <div class="experience-header">
                            <h3>Senior Consultant</h3>
                            <div class="company">Deloitte Consulting</div>
                            <div class="duration">January 2019 - July 2023</div>
                        </div>
                        <p class="experience-description">
                            Management consultant for advisory and transformation projects. Worked on develping products and solutions for clients in the Retail and CPG industry.
                        </p>
                    </div>

                    <div class="experience-item">
                        <div class="experience-header">
                            <h3>Software Engineer</h3>
                            <div class="company">Various</div>
                            <div class="duration">August 2012 - July 2017</div>
                        </div>
                        <p class="experience-description">
                            Worked on building data pipelines and data products for across industries in the UK, India and the Middle East.
                        </p>
                    </div>
                </div>
            </section>

            <section id="education" class="education-section">
                <h2>My Education</h2>
                <div class="education-grid">
                    <div class="education-item">
                        <div class="education-logo">
                            <img src="assets/University_of_Cincinnati_Logo.jpeg" alt="UQ Logo">
                        </div>
                        <div class="education-details">
                            <h3>The University of Cincinnati</h3>
                            <div class="degree">Data Science and Artificial Intelligence</div>
                            <div class="duration">Master of Information Systems</div>
                        </div>
                    </div>

                    <div class="education-item">
                        <div class="education-logo">
                            <img src="assets/PESUniversity-logo.jpg" alt="Previous University Logo">
                        </div>
                        <div class="education-details">
                            <h3>PES University</h3>
                            <div class="degree">Electrical and Electronics Engineering</div>
                            <div class="duration">Bachelor of Engineering</div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="contact">
                <h2>Contact me</h2>
                <p>I am currently looking to build. Early stage entrepreneurs are welcome to reach out. You can reach me at <a href="mailto:emailnarensham@gmail.com">emailnarensham@gmail.com</a></p>
            </section>
        </main>
    </div>
    <!-- Add Three.js initialization script -->
    <script>
        // Countdown timer
        let countdownTime = 5; // Set countdown time in seconds
        const countdownElement = document.getElementById('countdown');

        const countdownInterval = setInterval(() => {
            countdownTime--;
            countdownElement.textContent = countdownTime;

            if (countdownTime <= 0) {
                clearInterval(countdownInterval);
                document.getElementById('loading-overlay').style.display = 'none'; // Hide loading overlay
            }
        }, 1000);

        // Set up scene
        const scene = new THREE.Scene();
        // Set default background color (will be visible even before/if EXR fails to load)
        scene.background = new THREE.Color(0xafd5da); // Light blue color

        const container = document.getElementById('model-container');
        const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ 
            antialias: true,
            alpha: true  // Enable alpha
        });
        
        // Set renderer background to match scene
        renderer.setClearColor(0xffffff, 1);
        
        // Enable tone mapping and correct color space
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1;
        renderer.outputEncoding = THREE.sRGBEncoding;
        
        renderer.setSize(container.clientWidth, container.clientHeight);
        container.appendChild(renderer.domElement);

        // Load environment map
        const pmremGenerator = new THREE.PMREMGenerator(renderer);
        pmremGenerator.compileEquirectangularShader();

        const exrLoader = new THREE.EXRLoader();
        exrLoader.load(
            'assets/mario_bg.exr',
            function (texture) {
                const envMap = pmremGenerator.fromEquirectangular(texture).texture;
                scene.environment = envMap;
                // Only set background if EXR loads successfully
                if (!/iPhone|iPad|iPod/i.test(navigator.userAgent)) {
                    scene.background = envMap;
                }
                
                // Create a rotation matrix to adjust the environment map orientation
                const rotationMatrix = new THREE.Matrix4();
                // Rotate around Y axis (left/right)
                const yRotation = Math.PI * 0.5; // 90 degrees - adjust this value
                // Rotate around X axis (up/down)
                const xRotation = Math.PI * 0.1; // slight tilt - adjust this value
                // Rotate around Z axis (roll)
                const zRotation = 0; // adjust if needed
                
                rotationMatrix.makeRotationFromEuler(
                    new THREE.Euler(xRotation, yRotation, zRotation)
                );
                
                // Apply rotation to environment map
                envMap.matrix = rotationMatrix;
                envMap.matrixAutoUpdate = false;
                
                texture.dispose();
                pmremGenerator.dispose();
                
                console.log('EXR file loaded successfully');
                // Hide loading overlay when the background is loaded
                document.getElementById('loading-overlay').style.display = 'none';
            },
            function (progress) {
                console.log('Loading EXR:', (progress.loaded / progress.total * 100) + '%');
            },
            function (error) {
                console.error('Error loading EXR file:', error);
                // Background is already set to light blue, so we just need to hide the loading overlay
                document.getElementById('loading-overlay').style.display = 'none';
            }
        );

        // Add lights with reduced intensity
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
        scene.add(ambientLight);
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.3); // Further reduced
        directionalLight.position.set(0, 1, 2);
        const directionalLightback = new THREE.DirectionalLight(0xffffff, 0.3); // Further reduced
        directionalLightback.position.set(0, 1, -2);
        scene.add(directionalLight);
        scene.add(directionalLightback);
        
        // Position camera - updating the initial position
        camera.position.set(0, 0, 8);  // Changed from 5 to 8 to zoom out
        camera.lookAt(0, 0, 0);

        // Modify OrbitControls settings
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.screenSpacePanning = true;
        controls.minDistance = 2;
        controls.maxDistance = 10;
        controls.target.set(0, 0, 0);

        // Disable all zoom/pan/rotation controls
        controls.enableZoom = false; 
        
        let model;
        
        // Load GLB model
        const loader = new THREE.GLTFLoader();
        loader.load(
            'assets/bust_ted3.glb',
            function (gltf) {
                model = gltf.scene;
                model.scale.set(2, 2, 2);
                model.position.set(-2, 0, 0);
                
                // Center the model
                const box = new THREE.Box3().setFromObject(model);
                const center = box.getCenter(new THREE.Vector3());
                model.position.sub(center);
                
                // Add initial rotation to face forward
                model.rotation.set(0, 0, 0);
                
                // Enable environment map on the model materials
                model.traverse((child) => {
                    if (child.isMesh) {
                        child.material.envMapIntensity = 1;
                    }
                });
                
                scene.add(model);
                
                // Update controls target to origin
                controls.target.set(0, 0, 0);
                controls.update();
                // Hide loading overlay when the model is loaded
                document.getElementById('loading-overlay').style.display = 'none';
            },
            undefined,
            function (error) {
                console.error('An error occurred loading the model:', error);
            }
        );

        // Add these variables after scene setup
        let mouseX = 0;
        let mouseY = 0;
        let targetX = 0;
        let targetY = 0;
        const windowHalfX = window.innerWidth / 2;
        const windowHalfY = window.innerHeight / 2;
        const movementRange = 0.5; // Adjust this value to control movement range (0.5 = 50% of max movement)

        // Add mouse move event listener
        document.addEventListener('mousemove', onDocumentMouseMove);

        function onDocumentMouseMove(event) {
            mouseX = (event.clientX - windowHalfX);
            mouseY = (event.clientY - windowHalfY);
        }

        // Update the animate function
        function animate() {
            requestAnimationFrame(animate);

            if (model) {
                // Calculate target position with smooth interpolation
                targetX = mouseX * 0.001; // Adjust multiplier to control sensitivity
                targetY = mouseY * 0.001;

                // Restrict movement range
                targetX = Math.max(Math.min(targetX, movementRange), -movementRange);
                targetY = Math.max(Math.min(targetY, movementRange), -movementRange);

                // Smooth interpolation
                model.rotation.y += (targetX - model.rotation.y) * 0.05;
                model.rotation.x += (targetY - model.rotation.x) * 0.05;
            }

            renderer.render(scene, camera);
        }

        animate();
    </script>
    <!-- Add this right before </body> -->
    <script>
        const hamburger = document.getElementById('hamburger');
        const navLinks = document.getElementById('nav-links');
        const body = document.body;

        function toggleMenu() {
            hamburger.classList.toggle('active');
            navLinks.classList.toggle('show');
            body.classList.toggle('menu-open');
        }

        function closeMenu() {
            hamburger.classList.remove('active');
            navLinks.classList.remove('show');
            body.classList.remove('menu-open');
        }

        // Toggle menu on hamburger click
        hamburger.addEventListener('click', (e) => {
            e.stopPropagation();
            toggleMenu();
        });

        // Close menu when clicking a link
        navLinks.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const target = e.target.getAttribute('href');
                
                closeMenu();
                
                // Small delay before scrolling to section
                setTimeout(() => {
                    document.querySelector(target).scrollIntoView({
                        behavior: 'smooth'
                    });
                }, 300);
            });
        });

        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
            if (navLinks.classList.contains('show') && 
                !e.target.closest('nav') && 
                !e.target.closest('.hamburger')) {
                closeMenu();
            }
        });

        // Close menu on resize
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                closeMenu();
            }
        });
    </script>
    <!-- Add this script before the closing body tag -->
    <script>
        const roles = [
            "former Management Consultant",
            "Full Stack Developer",
            "Product Manager",
            "Freelancer",
            "Supply Chain Planning Expert",
            "BI Architect",
            "Problem Solver",
        ];

        const dynamicText = document.querySelector('.dynamic-text');
        let currentIndex = 0;
        let isDeleting = false;
        let currentText = '';
        let typingSpeed = 50; // Speed of typing in milliseconds

        function typeText() {
            const fullText = roles[currentIndex];

            if (isDeleting) {
                // Remove characters
                currentText = fullText.substring(0, currentText.length - 1);
                typingSpeed = 30; // Faster when deleting
            } else {
                // Add characters
                currentText = fullText.substring(0, currentText.length + 1);
                typingSpeed = 50; // Normal speed when typing
            }

            dynamicText.textContent = currentText;

            if (!isDeleting && currentText === fullText) {
                // Start deleting after a pause
                isDeleting = true;
                typingSpeed = 2000; // Wait before starting to delete
            } else if (isDeleting && currentText === '') {
                // Move to next text
                isDeleting = false;
                currentIndex = (currentIndex + 1) % roles.length;
                typingSpeed = 500; // Pause before typing next word
            }

            setTimeout(typeText, typingSpeed);
        }

        // Start the typing animation
        typeText();
    </script>
    <!-- Add this before closing body tag -->
    <script src="scripts/projects.js"></script>
    <!-- Add before closing body tag -->
    <script src="scripts/skills.js"></script>
    <footer>
        <p style="text-align: center; font-size: 0.8rem; margin-top: 2rem;">
            Made with ❤️ by Naren
        </p>
    </footer>
</body>
</html> 